{% extends 'base.html' %}

{% block content %}
<h2> {{server.name}}</h2>
<h4>{{server.address}}</h4>
<hr>
<div class="row">
    <div class="span4">
        <p>
            <strong>Alltime Unique Players:</strong> {{server.total_players}}<br />
            <strong>Unique Players Today:</strong> {{server.today_players}}<br />
        </p>
        <p>
            <strong>Alltime Logins:</strong> {{server.total_sessions}}<br />
            <strong>Todays Logins:</strong> {{server.today_sessions}}<br />
            <strong>Uptime:</strong> {{server.uptime}}%            
        </p>
    </div>
    <div class="span8">
        <div id="hourlyuser_chart"></div>
        <div id="weeklyuser_chart"></div>      
    </div>
</div>
<div class="row">
    <div class="span12">
        <p>
            <strong>Currently {{server.online_count}} players online:</strong>
            <ul style="list-style: none;">
            {% for p in server.online_players %}
            <li style="width: 150px; float: left;"><img src="http://minotar.net/avatar/{{p.username}}/16" style="width: 16px; height: 16px;"> {{p.username}}</li>
            {% endfor %}
            </ul>
            </p>
        </p>
    </div>
</div>
{% endblock %}

{% block javascript %}
<script type="text/javascript">
var server = {{server.pk}};
$(function(){
   $.get('/stats/hourly_users/'+server+'/', function(data){
        data = $.parseJSON(data);
        graphHourlyUsers('hourlyuser_chart', data);
   });
});
</script>
{% endblock %}
